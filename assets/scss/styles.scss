@use 'sass:color';
@import 'variables';

// Import Google Fonts - Fredoka (headings) & Nunito (body)
@import url('https://fonts.googleapis.com/css2?family=Fredoka:wght@400;600;700&family=Nunito:wght@300;400;500;600;700&display=swap');

// 나눔스퀘어 폰트는 nuxt.config.ts에서 link로 로드됨
// 나눔스퀘어 font-weight 매핑
// 300 (Light): NanumSquareLight, NanumSquareAcl
// 400 (Regular): NanumSquare, NanumSquareAcr
// 700 (Bold): NanumSquareBold, NanumSquareAcb
// 800 (ExtraBold): NanumSquareExtraBold, NanumSquareAceb

@font-face {
    font-family: 'NanumSquareCustom';
    src: local('NanumSquareLight'), local('NanumSquareAcl');
    font-weight: 300;
    font-style: normal;
}

@font-face {
    font-family: 'NanumSquareCustom';
    src: local('NanumSquare'), local('NanumSquareAcr');
    font-weight: 400;
    font-style: normal;
}

@font-face {
    font-family: 'NanumSquareCustom';
    src: local('NanumSquare'), local('NanumSquareAcr');
    font-weight: 500;
    font-style: normal;
}

@font-face {
    font-family: 'NanumSquareCustom';
    src: local('NanumSquareBold'), local('NanumSquareAcb');
    font-weight: 600;
    font-style: normal;
}

@font-face {
    font-family: 'NanumSquareCustom';
    src: local('NanumSquareBold'), local('NanumSquareAcb');
    font-weight: 700;
    font-style: normal;
}

@font-face {
    font-family: 'NanumSquareCustom';
    src: local('NanumSquareExtraBold'), local('NanumSquareAceb');
    font-weight: 800;
    font-style: normal;
}

@font-face {
    font-family: 'NanumSquareCustom';
    src: local('NanumSquareExtraBold'), local('NanumSquareAceb');
    font-weight: 900;
    font-style: normal;
}

:root {
    font-family: 'NanumSquareCustom', 'NanumSquare', 'Nunito', sans-serif;
    line-height: 1.5;
    font-weight: 500;

    color-scheme: light;
    color: $text-primary;
    background-color: $bg-primary;

    font-synthesis: none;
    text-rendering: optimizeLegibility;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;

    // CSS Custom Properties for dynamic theming (Light Mode)
    --color-primary: #{$primary};
    --color-secondary: #{$secondary};
    --color-accent: #{$accent};
    --color-info: #{$info};
    --color-success: #{$success};
    --color-warning: #{$warning};
    --color-negative: #{$negative};

    --bg-primary: #{$bg-primary};
    --bg-secondary: #{$bg-secondary};
    --bg-card: #{$bg-card};
    --bg-header: #{$bg-card};
    --bg-surface: #{$bg-secondary};
    --bg-input: #{$bg-card};

    --text-primary: #{$text-primary};
    --text-secondary: #{$text-secondary};
    --text-light: #{$text-light};
    --text-white: #{$text-white};

    --shadow-color: rgba(45, 52, 54, 0.08);
    --border-color: rgba(45, 52, 54, 0.1);
    --hover-overlay: rgba(78, 205, 196, 0.08);
}

// Dark Mode Theme
.dark-mode {
    color-scheme: dark;
    color: $dark-text-primary;
    background-color: $dark-bg-primary;

    --bg-primary: #{$dark-bg-primary};
    --bg-secondary: #{$dark-bg-secondary};
    --bg-card: #{$dark-bg-card};
    --bg-header: #{$dark-bg-header};
    --bg-surface: #{$dark-bg-surface};
    --bg-input: #{$dark-bg-surface};

    --text-primary: #{$dark-text-primary};
    --text-secondary: #{$dark-text-secondary};
    --text-light: #{$dark-text-light};

    --shadow-color: rgba(0, 0, 0, 0.3);
    --border-color: rgba(255, 255, 255, 0.08);
    --hover-overlay: rgba(255, 255, 255, 0.06);
}

* {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
}

html,
body {
    height: 100%;
    background-color: var(--bg-primary);
    color: var(--text-primary);
    font-family: 'NanumSquareCustom', 'Nunito', sans-serif;
    transition:
        background-color 0.3s ease,
        color 0.3s ease;
}

a {
    font-weight: 500;
    color: var(--color-primary);
    text-decoration: inherit;
}

a:hover {
    color: var(--color-secondary);
}

button {
    border-radius: 8px;
    border: 1px solid transparent;
    padding: 0.6em 1.2em;
    font-size: 1em;
    font-weight: 500;
    font-family: inherit;
    background-color: var(--color-primary);
    color: var(--text-white);
    cursor: pointer;
    transition: all 0.25s ease;
}

button:hover {
    background-color: var(--color-secondary);
    border-color: var(--color-secondary);
}

button:focus,
button:focus-visible {
    outline: 2px solid var(--color-accent);
    outline-offset: 2px;
}

#__nuxt {
    height: 100%;
}

.q-drawer {
    position: fixed !important;
}

// GoGoQuizKing 공통 유틸리티 클래스
.quiz-card {
    background: var(--bg-card);
    border-radius: $radius-lg;
    box-shadow: 0 4px 12px var(--shadow-color);
    transition:
        transform $transition-normal,
        box-shadow $transition-normal,
        background-color 0.3s ease;

    &:hover {
        transform: translateY(-4px);
        box-shadow: 0 8px 24px var(--shadow-color);
    }
}

.category-chip {
    display: inline-flex;
    align-items: center;
    gap: $spacing-xs;
    padding: $spacing-xs $spacing-sm;
    border-radius: $radius-full;
    font-size: $font-size-sm;
    font-weight: 500;
}

.difficulty-badge {
    display: inline-flex;
    align-items: center;
    gap: $spacing-xs;
    padding: $spacing-xs $spacing-md;
    border-radius: $radius-md;
    font-size: $font-size-sm;
    font-weight: 600;
}

// 버튼 공통 스타일
.btn-quiz {
    min-height: $touch-target-min;
    border-radius: $radius-md;
    font-weight: 600;
    transition: all $transition-normal;
}

.btn-primary {
    background-color: $primary;
    color: $text-white;

    &:hover {
        background-color: color.scale($primary, $lightness: -10%);
    }
}

.btn-secondary {
    background-color: $secondary;
    color: $text-white;

    &:hover {
        background-color: color.scale($secondary, $lightness: -10%);
    }
}

// 페이지 레이아웃
.page-container {
    max-width: 1200px;
    margin: 0 auto;
    padding: $spacing-md;
}

.page-title {
    font-family: 'Fredoka', sans-serif;
    font-size: $font-size-2xl;
    font-weight: 700;
    color: var(--text-primary);
    margin-bottom: $spacing-lg;
}

// Headings use Fredoka
h1,
h2,
h3,
h4,
h5,
h6 {
    font-family: 'Fredoka', sans-serif;
    font-weight: 700;
}

.q-textarea {
    &.q-field--labeled {
        .q-field__native {
            color: var(--text-primary);
        }
    }
}

// Quasar 다크 모드 오버라이드
.body--dark {
    .q-layout {
        background-color: var(--bg-primary);
    }

    .q-header,
    .q-footer {
        background-color: var(--bg-header) !important;
    }

    .q-drawer {
        background-color: var(--bg-card) !important;
        border-right: 1px solid var(--border-color);
    }

    .q-item {
        color: var(--text-primary);

        &:hover {
            background-color: var(--hover-overlay);
        }

        .q-item__label {
            color: var(--text-primary);
        }
    }

    .q-page {
        background-color: var(--bg-primary);
        color: var(--text-primary);
    }

    .q-input,
    .q-select {
        .q-field__control {
            background-color: var(--bg-input);
        }

        .q-field__label {
            color: var(--text-secondary);
        }

        .q-field__native,
        .q-field__prefix,
        .q-field__suffix {
            color: var(--text-primary);
        }

        .q-field__marginal {
            color: var(--text-secondary);
        }
    }

    .q-btn-toggle {
        background-color: var(--bg-surface);
    }

    .q-table {
        color: var(--text-primary);
        background-color: var(--bg-card);

        thead tr th {
            color: var(--text-primary);
        }

        tbody tr td {
            color: var(--text-primary);
            a {
                color: var(--text-primary) !important;
            }
        }
    }

    .q-card {
        background-color: var(--bg-card);
        color: var(--text-primary);

        .q-card__section {
            color: var(--text-primary);
        }
    }

    .q-dialog {
        .q-card {
            background-color: var(--bg-card);
            color: var(--text-primary);
        }
    }

    // Quasar text helper classes override for dark mode
    .text-grey-6,
    .text-grey-7 {
        color: var(--text-secondary) !important;
    }

    .text-body2 {
        color: var(--text-secondary);
    }

    .text-h5,
    .text-h6 {
        color: var(--text-primary);
    }

    .q-toggle {
        .q-toggle__label {
            color: var(--text-primary);
        }
    }

    .q-checkbox {
        .q-checkbox__label {
            color: var(--text-primary);
        }
    }

    .q-radio {
        .q-radio__label {
            color: var(--text-primary);
        }
    }

    // Fix for icons
    .q-icon {
        color: #fff;
    }

    // Fix for menu
    .q-menu {
        background-color: var(--bg-card);
        color: var(--text-primary);
    }

    // Fix for list items in menus
    .q-list {
        color: var(--text-primary);
    }
}

// Quasar 라이트 모드 스타일링 개선
.body--light {
    .q-layout {
        background-color: var(--bg-primary);
    }

    .q-header,
    .q-footer {
        background-color: var(--bg-header) !important;
    }

    .q-drawer {
        background-color: var(--bg-card) !important;
        border-right: 1px solid var(--border-color);
    }

    .q-field--outlined {
        .q-field__control {
            &:before {
                border-color: var(--border-color);
            }
        }
    }

    .q-item {
        color: var(--text-primary);

        &:hover {
            background-color: var(--hover-overlay);
        }

        .q-item__label {
            color: var(--text-primary);
        }
    }

    .q-page {
        background-color: var(--bg-primary);
        color: var(--text-primary);
    }

    .q-input,
    .q-select {
        .q-field__control {
            background-color: var(--bg-input) !important;
            color: var(--text-primary) !important;
        }

        .q-field__label {
            color: var(--text-secondary) !important;
        }

        .q-field__native,
        .q-field__prefix,
        .q-field__suffix,
        .q-field__input {
            color: var(--text-primary) !important;
        }

        .q-field__marginal {
            color: var(--text-secondary);
        }

        // Select component specific
        .q-select__dropdown-icon {
            color: var(--text-secondary);
        }
    }
    .q-field__label {
        color: var(--text-secondary) !important;
    }

    .q-btn {
        color: var(--text-primary);

        &.q-btn--flat {
            color: var(--text-primary);
        }
    }

    .q-btn-toggle {
        background-color: var(--bg-surface);
        color: var(--text-primary);

        .q-btn {
            color: var(--text-primary) !important;

            .q-btn__content {
                color: var(--text-primary);
            }
        }

        .bg-primary {
            color: white !important;
            .q-btn__content {
                color: white !important;
            }
        }
    }

    .q-table {
        color: var(--text-primary);
        background-color: var(--bg-card);

        .q-table__top {
            color: var(--text-primary);
        }

        thead tr th {
            color: var(--text-primary);
        }

        tbody tr td {
            color: var(--text-primary);
        }
    }

    .q-toolbar {
        color: var(--text-primary);
    }

    .q-card {
        background-color: var(--bg-card);
        color: var(--text-primary);

        .q-card__section {
            color: var(--text-primary);
        }
    }

    .q-dialog {
        .q-card {
            background-color: var(--bg-card);
            color: var(--text-primary);
        }
    }

    .q-toggle {
        .q-toggle__label {
            color: var(--text-primary);
        }
    }

    .q-checkbox {
        .q-checkbox__label {
            color: var(--text-primary);
        }
    }

    .q-radio {
        .q-radio__label {
            color: var(--text-primary);
        }
    }

    // Text helper classes for light mode
    .text-grey-6,
    .text-grey-7 {
        color: var(--text-secondary) !important;
    }

    .text-body2 {
        color: var(--text-secondary);
    }

    .text-h5,
    .text-h6 {
        color: var(--text-primary);
    }

    // Fix for menu
    .q-menu {
        background-color: var(--bg-card);
        color: var(--text-primary);
    }

    // Fix for list items
    .q-list {
        color: var(--text-primary);
    }
}

// 애니메이션
@keyframes fadeIn {
    from {
        opacity: 0;
        transform: translateY(10px);
    }
    to {
        opacity: 1;
        transform: translateY(0);
    }
}

@keyframes pulse {
    0%,
    100% {
        transform: scale(1);
    }
    50% {
        transform: scale(1.05);
    }
}

@keyframes shake {
    0%,
    100% {
        transform: translateX(0);
    }
    25% {
        transform: translateX(-5px);
    }
    75% {
        transform: translateX(5px);
    }
}

.animate-fade-in {
    animation: fadeIn 0.3s ease-out;
}

.animate-pulse {
    animation: pulse 0.5s ease-in-out;
}

.animate-shake {
    animation: shake 0.3s ease-in-out;
}
